<?php
require('variables.php');
require('variablesdb.php');
?>
<table id="ladder" class="tablesorter" width="100%" border="0" bgcolor="<?echo"$color5" ?>" bordercolor="<?echo"$color1" ?>" cellspacing="2" cellpadding="2">
<thead>
<tr>
<th bordercolor="<?echo"$color7" ?>" align="left" width=10% nowrap>No.</th>
<th bordercolor="<?echo"$color7" ?>" align="left" nowrap>Avatar&nbsp; &nbsp;</th>
<th bordercolor="<?echo"$color7" ?>" align="left" nowrap>Player&nbsp; &nbsp;</th>
<th bordercolor="<?echo"$color7" ?>" align="center" nowrap>Wins&nbsp; &nbsp;</th>
<th bordercolor="<?echo"$color7" ?>" align="center" nowrap>Losses&nbsp; &nbsp;</th>
<th bordercolor="<?echo"$color7" ?>" align="center" nowrap>Total&nbsp; &nbsp;</th>
<th bordercolor="<?echo"$color7" ?>" align="center" nowrap>Wins% &nbsp; &nbsp;</th>
<th bordercolor="<?echo"$color7" ?>" align="center" nowrap>Rating&nbsp; &nbsp;</th>
<th bordercolor="<?echo"$color7" ?>" align="center" nowrap>Streak&nbsp; &nbsp;</th>
</tr>
</thead>
<tbody>

<?php
// How many do they have to play before they get listed?
$sql="SELECT * FROM $playerstable WHERE games >= $gamestorank AND rating >= $ladderminelo ORDER BY rating DESC LIMIT 0 , $playersshown";

echo $sql;
$result=mysql_query($sql,$db) or die ("failed to select players");
$cur=1;
$odd = 1;
while ($row = mysql_fetch_array($result)) {


if ($row[approved] == "no") {
$namepage = "<font color='#FF0000'>$row[name]</font>";
}
else {
$namepage = "<font color='$color1'>$row[name]</font>";
}
if ($row[games] <= 0) {
$percentage = 0.000;
}
else {
$percentage = $row[wins] / $row[games];
}
if ($row[streakwins] >= $hotcoldnum) {
$picture = 'icons/streakplusplus.gif';
$streak = $row[streakwins];
}else if ($row[streaklosses] >= $hotcoldnum) {
$picture = 'icons/streakminusminus.gif';
$streak = -$row[streaklosses];
}else if ($row[streakwins] > 0) {
$picture = 'icons/streakplus.gif';
$streak = $row[streakwins];
}else if ($row[streaklosses] > 0) {
$picture = 'icons/streakminus.gif';
$streak = -$row[streaklosses];
}else{
$picture = 'icons/streaknull.gif';
$streak = 0;
}
?>
<tr>

<?php 
// Decide the colour of this part of the table output... 

if ($odd == 1) { $cellcolor = "d7bd95"; } else { $cellcolor = "E7D9C0";}
if (($loggedin == 1) && ($row[name] == $nameincookie)) { $cellcolor = "99b377";}
if ($mostgames == $row[name]) {$cellcolor = "b0afb5"; }
if ($row[losses] == 0) {$cellcolor = "cb9850"; }
if ($higheststreaks == $row[name]) {$cellcolor = "cb6d50"; }


// $cellcolor = "cb9850" gula
// röda cb6d50  /  blåa 509bcb  / lila a09bba // grå b0afb5



// DEB echo "$higheststreaks / $row[name]<br>";

?>
<td bgcolor="#<?php echo "$cellcolor";?>"  bordercolor="<?echo"$color7" ?>" align="center" nowrap><p class='text'><?php echo "$cur"?></td>



<td <?php if (($loggedin == 1) && ($row[name] == $nameincookie)) {
	echo "bgcolor='#99b377'";	}
	else if ($odd == 1) { echo "bgcolor='#d7bd95'"; }
	else { echo "bgcolor='#E7D9C0'"; }?>  bordercolor="<?echo"$color7" ?>" align="center" nowrap><p class='text'><?php 	echo "<img border='0' src='avatars/$row[Avatar].gif' alt='avatar'>"?></td>
	
	
<td <?php if (($loggedin == 1) && ($row[name] == $nameincookie)) {
	echo "bgcolor='#99b377'";	}
else if ($odd == 1) { echo "bgcolor='#d7bd95'"; }
else { echo "bgcolor='#E7D9C0'"; }?> bordercolor="<?echo"$color7" ?>" align="left" nowrap><p class='text'><?echo "<p>&nbsp;<a href='profile.php?name=$row[name]'>$namepage</a>&nbsp;</p>"?></td>


<td <?php if (($loggedin == 1) && ($row[name] == $nameincookie)) {
	echo "bgcolor='#99b377'";	}
	else if ($odd == 1) { echo "bgcolor='#d7bd95'"; }
else { echo "bgcolor='#E7D9C0'"; }?>  bordercolor="<?echo"$color7" ?>" align="center" nowrap><p class="text"><?echo "$row[wins]" ?></p></td>

<td <?php if (($loggedin == 1) && ($row[name] == $nameincookie)) {
	echo "bgcolor='#99b377'";	}
	else if ($odd == 1) { echo "bgcolor='#d7bd95'"; }
	else { echo "bgcolor='#E7D9C0'"; }?>  bordercolor="<?echo"$color7" ?>" align="center" nowrap><p class="text"><?echo "$row[losses]" ?></p></td>


<td <?php if (($loggedin == 1) && ($row[name] == $nameincookie)) {
	echo "bgcolor='#99b377'";	}
	else if ($odd == 1) { echo "bgcolor='#d7bd95'"; }
else { echo "bgcolor='#E7D9C0'"; }?>  bordercolor="<?echo"$color7" ?>" align="center" nowrap><p class="text"><?echo ($row[losses]+$row[wins]); ?></p></td>

<td <?php if (($loggedin == 1) && ($row[name] == $nameincookie)) {
	echo "bgcolor='#99b377'";	}
	else if ($odd == 1) { echo "bgcolor='#d7bd95'"; }
	else { echo "bgcolor='#E7D9C0'"; }?>  bordercolor="<?echo"$color7" ?>" align="center" nowrap><p class="text"><? $ny = $percentage * 100; printf("%.0f", $ny); ?></p></td>

<td <?php if (($loggedin == 1) && ($row[name] == $nameincookie)) {
	echo "bgcolor='#99b377'";	}
	else if ($odd == 1) { echo "bgcolor='#d7bd95'"; }
	else { echo "bgcolor='#E7D9C0'"; }?>   bordercolor="<?echo"$color7" ?>" align="center" nowrap><p class="text">
<?php
if ($system == "points") {
echo "$row[points]";
}
else {
echo "$row[rating]";
}
?>
</p></td>
<td <?php if (($loggedin == 1) && ($row[name] == $nameincookie)) {
	echo "bgcolor='#99b377'";	}
	else if ($odd == 1) { echo "bgcolor='#d7bd95'"; }
	else { echo "bgcolor='#E7D9C0'"; }?> width="1" bordercolor="<?echo"$color7" ?>" align="left" nowrap>
<p class='text'><?echo "<img src='$picture' alt='Streak: $streak' align='absmiddle' border='0'>"?></p></td>
</tr>



<?php
$cur++;

if ($odd == 1) {
$odd = 0;
} 
else { 
$odd = 1;
}
}
?>
</table>
<br>
<table><TR><TD width="50%"><IMG src="graphics/i2.gif" align="left" border="0"><b>rampage</b> - highest win streak of all members, inc. passive.</TD>

<td><IMG src="graphics/i6.gif" align="left" border="0"><b>warhorse</b> - played most games of all members, inc. passive.</td>
</TR>

<TR><TD width="50%"><IMG src="graphics/i1.gif" align="left" border="0"><b>unscathed</b> - never lost a ladder game.</TD>

<td>&nbsp;</td>
</TR>

</tbody>
</table><p>
<div id="pager" class="pager">
	<form>
		<img src="lib/first.png" class="first"/>
		<img src="lib/prev.png" class="prev"/>
		<input type="text" class="pagedisplay"/>
		<img src="lib/next.png" class="next"/>
		<select class="pagesize">
			<option selected="selected"  value="10">10</option>

			<option value="20">20</option>
			<option value="30">30</option>
			<option  value="40">40</option>
		</select>
	</form>
</div>

<p class="copyleft">To <i>show up</i> in the ladder above you must have played >= <?php echo "$gamestorank"; ?> games, have a rating of >= <?php echo "$ladderminelo"; ?> & have played within <?php echo "$passivedays"; ?> days. Don't worry  if you haven't played for a while. All it takes is one game to become active again. Your rating doesn't decay while you are gone. 1500 is the <i>average</i> skilled player, new players will have less and vets more. Hence, don't quit playing if you rate below 1500.</p>


